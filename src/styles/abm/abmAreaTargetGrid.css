/**
 * ABM Area Target Grid Styles
 * Replicated from TBM Territory Target Grid with AREA FLAVOUR
 * Uses 'abm-tgt-' prefix to avoid conflicts
 *
 * AREA COLOUR SCHEME:
 * - Primary: Navy (#1B365D) + Blue (#3B82F6)
 * - Area accent: #2563EB (deeper blue)
 * - Submitted to ZBM: Blue (#3B82F6)
 *
 * @author Appasamy Associates - Product Commitment PWA
 * @version 1.0.0
 */

/* ==================== CSS VARIABLES ==================== */

.abm-tgt-container {
  --abm-primary: #1B365D;
  --abm-primary-dark: #0D2240;
  --abm-accent: #3B82F6;
  --abm-accent-deep: #2563EB;
  --abm-accent-light: #DBEAFE;
  --abm-white: #FFFFFF;
  --abm-gray-50: #F9FAFB;
  --abm-gray-100: #F3F4F6;
  --abm-gray-200: #E5E7EB;
  --abm-gray-300: #D1D5DB;
  --abm-gray-400: #9CA3AF;
  --abm-gray-500: #6B7280;
  --abm-gray-600: #4B5563;
  --abm-gray-700: #374151;
  --abm-gray-800: #1F2937;
  --abm-border: #E5E7EB;
  --abm-font-mono: 'JetBrains Mono', 'Fira Code', monospace;
  --abm-q1: #3B82F6; --abm-q2: #22C55E; --abm-q3: #F59E0B; --abm-q4: #EF4444;
  --abm-q1-bg: rgba(59, 130, 246, 0.06);
  --abm-q2-bg: rgba(34, 197, 94, 0.06);
  --abm-q3-bg: rgba(245, 158, 11, 0.06);
  --abm-q4-bg: rgba(239, 68, 68, 0.06);

  font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  background: var(--abm-white);
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 4px 24px rgba(0, 0, 0, 0.08);
  margin: 1rem 0;
  border: 1px solid var(--abm-gray-200);
}

/* ==================== GRID HEADER ==================== */

.abm-tgt-grid-header {
  background: linear-gradient(135deg, #1E3A5F 0%, #1B365D 50%, #2563EB 100%);
  padding: 1.25rem 1.5rem;
  color: var(--abm-white);
}

.abm-tgt-grid-title {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 0.75rem;
  flex-wrap: wrap;
  gap: 0.75rem;
}

.abm-tgt-title-left {
  display: flex;
  align-items: center;
  gap: 0.875rem;
}

.abm-tgt-area-icon {
  width: 44px;
  height: 44px;
  background: rgba(255, 255, 255, 0.15);
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.25rem;
  backdrop-filter: blur(4px);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.abm-tgt-grid-title h2 {
  font-size: 1.125rem;
  font-weight: 700;
  margin: 0;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.abm-tgt-grid-title h2 i { font-size: 0.875rem; opacity: 0.8; }

.abm-tgt-area-name {
  display: block;
  font-size: 0.8125rem;
  opacity: 0.85;
  margin-top: 2px;
}

.abm-tgt-fiscal-year {
  background: rgba(255, 255, 255, 0.15);
  padding: 0.375rem 0.875rem;
  border-radius: 8px;
  font-size: 0.8125rem;
  font-weight: 600;
  border: 1px solid rgba(255, 255, 255, 0.2);
}

/* Info Banner */
.abm-tgt-info-banner {
  display: flex;
  align-items: flex-start;
  gap: 0.5rem;
  padding: 0.625rem 0.875rem;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  font-size: 0.8125rem;
  line-height: 1.4;
  margin-bottom: 0.75rem;
  border: 1px solid rgba(255, 255, 255, 0.15);
}

.abm-tgt-info-banner i { margin-top: 2px; opacity: 0.8; }

/* Actions */
.abm-tgt-grid-actions {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  flex-wrap: wrap;
}

.abm-tgt-last-saved {
  font-size: 0.75rem;
  opacity: 0.8;
  display: flex;
  align-items: center;
  gap: 4px;
}

.abm-tgt-action-btn {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 8px;
  font-size: 0.8125rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

.abm-tgt-action-btn.abm-tgt-save {
  background: rgba(255, 255, 255, 0.15);
  color: #fff;
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.abm-tgt-action-btn.abm-tgt-save:hover { background: rgba(255, 255, 255, 0.25); }

.abm-tgt-action-btn.abm-tgt-submit {
  background: linear-gradient(135deg, #10B981, #059669);
  color: #fff;
}

.abm-tgt-action-btn.abm-tgt-submit:hover { box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3); }

/* ==================== OVERALL TARGET BAR ==================== */

.abm-tgt-overall-bar {
  padding: 1rem 1.5rem;
  background: var(--abm-gray-50);
  border-bottom: 1px solid var(--abm-border);
}

.abm-tgt-otb-main {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 1rem;
}

.abm-tgt-otb-card {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.875rem;
  background: var(--abm-white);
  border-radius: 10px;
  border: 1px solid var(--abm-gray-200);
}

.abm-tgt-otb-icon {
  width: 38px;
  height: 38px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1rem;
  background: var(--abm-accent-light);
  color: var(--abm-accent-deep);
}

.abm-tgt-committed-icon { background: #D1FAE5 !important; color: #059669 !important; }
.abm-tgt-qty-icon { background: #EDE9FE !important; color: #7C3AED !important; }
.abm-tgt-growth-icon { background: #FFF7ED !important; color: #EA580C !important; }

.abm-tgt-otb-content { flex: 1; min-width: 0; }
.abm-tgt-otb-label { display: block; font-size: 0.6875rem; color: var(--abm-gray-500); font-weight: 600; text-transform: uppercase; letter-spacing: 0.03em; }
.abm-tgt-otb-value { display: block; font-size: 1.125rem; font-weight: 800; color: var(--abm-gray-800); }
.abm-tgt-otb-value.positive { color: #10B981; }
.abm-tgt-otb-value.negative { color: #EF4444; }

/* ==================== SEARCH BAR ==================== */

.abm-tgt-search-bar {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 0.75rem 1.5rem;
  border-bottom: 1px solid var(--abm-border);
}

.abm-tgt-search-input-wrapper {
  flex: 1;
  position: relative;
  max-width: 360px;
}

.abm-tgt-search-input-wrapper i {
  position: absolute;
  left: 10px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--abm-gray-400);
  font-size: 0.875rem;
}

.abm-tgt-search-input {
  width: 100%;
  padding: 0.5rem 2rem 0.5rem 2.25rem;
  border: 1px solid var(--abm-border);
  border-radius: 8px;
  font-size: 0.875rem;
  color: var(--abm-gray-700);
}

.abm-tgt-search-input:focus {
  outline: none;
  border-color: var(--abm-accent);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.abm-tgt-search-clear {
  position: absolute;
  right: 8px;
  top: 50%;
  transform: translateY(-50%);
  border: none;
  background: none;
  color: var(--abm-gray-400);
  cursor: pointer;
  padding: 2px;
}

.abm-tgt-product-counter {
  font-size: 0.8125rem;
  color: var(--abm-gray-500);
  white-space: nowrap;
}

/* ==================== CATEGORY SECTIONS ==================== */

.abm-tgt-categories { padding: 0.5rem 0; }

.abm-tgt-category-section {
  border-bottom: 1px solid var(--abm-gray-200);
}

.abm-tgt-category-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.75rem 1.5rem;
  cursor: pointer;
  transition: background 0.15s;
}

.abm-tgt-category-header:hover { background: var(--abm-gray-50); }

.abm-tgt-category-name {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-weight: 600;
  color: var(--abm-gray-800);
  font-size: 0.9375rem;
}

.abm-tgt-chevron { font-size: 0.625rem; color: var(--abm-gray-400); transition: transform 0.2s; width: 12px; }
.abm-tgt-cat-icon { color: var(--abm-accent); font-size: 0.875rem; }

.abm-tgt-product-count {
  font-size: 0.75rem;
  color: var(--abm-gray-400);
  font-weight: 400;
  margin-left: 4px;
}

.abm-tgt-revenue-badge {
  font-size: 0.625rem;
  padding: 2px 6px;
  border-radius: 4px;
  background: #FEF3C7;
  color: #92400E;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.abm-tgt-category-summary {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.abm-tgt-cat-total { font-size: 0.8125rem; color: var(--abm-gray-600); font-weight: 500; }
.abm-tgt-cat-growth { font-size: 0.8125rem; font-weight: 600; }
.abm-tgt-cat-growth.positive { color: #10B981; }
.abm-tgt-cat-growth.negative { color: #EF4444; }

/* ==================== GRID TABLE ==================== */

.abm-tgt-grid-table {
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

.abm-tgt-grid-row {
  display: grid;
  grid-template-columns: 180px 40px repeat(12, minmax(55px, 1fr)) 70px 60px;
  align-items: center;
  border-bottom: 1px solid var(--abm-gray-100);
  min-height: 36px;
}

.abm-tgt-grid-header-row {
  background: linear-gradient(135deg, #1B365D, #2563EB);
  color: #fff;
  position: sticky;
  top: 0;
  z-index: 2;
}

.abm-tgt-grid-row .abm-tgt-header {
  font-size: 0.6875rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  padding: 0.5rem 0.25rem;
  text-align: center;
}

.abm-tgt-product-cell {
  padding: 0.375rem 0.5rem 0.375rem 1.5rem;
  font-size: 0.8125rem;
  font-weight: 500;
  color: var(--abm-gray-700);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.abm-tgt-type-cell {
  text-align: center;
  font-size: 0.625rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.abm-tgt-ly-label { color: var(--abm-gray-400); }
.abm-tgt-cy-label { color: var(--abm-accent-deep); }

.abm-tgt-month-cell {
  text-align: center;
  padding: 0.25rem;
  font-size: 0.8125rem;
  font-family: var(--abm-font-mono);
}

.abm-tgt-month-cell.abm-tgt-ly {
  color: var(--abm-gray-400);
  font-size: 0.75rem;
}

.abm-tgt-month-cell.abm-tgt-editable {
  cursor: pointer;
  font-weight: 500;
  color: var(--abm-gray-800);
  border-radius: 4px;
  transition: background 0.15s;
}

.abm-tgt-month-cell.abm-tgt-editable:hover {
  background: var(--abm-accent-light);
}

.abm-tgt-month-cell.abm-tgt-active-cell {
  background: #DBEAFE;
  outline: 2px solid var(--abm-accent);
  outline-offset: -1px;
}

.abm-tgt-cell-input {
  width: 100%;
  border: none;
  background: transparent;
  text-align: center;
  font-size: 0.8125rem;
  font-family: var(--abm-font-mono);
  font-weight: 600;
  color: var(--abm-accent-deep);
  outline: none;
}

.abm-tgt-cell-value { display: block; }

.abm-tgt-total-cell {
  text-align: center;
  font-size: 0.8125rem;
  font-weight: 700;
  color: var(--abm-gray-800);
  padding: 0.25rem;
  font-family: var(--abm-font-mono);
}

.abm-tgt-total-cell.abm-tgt-ly { color: var(--abm-gray-400); font-weight: 500; }
.abm-tgt-total-cell.abm-tgt-cy-total { color: var(--abm-accent-deep); }

.abm-tgt-growth-cell {
  text-align: center;
  padding: 0.25rem;
  font-size: 0.8125rem;
}

.abm-tgt-growth-badge {
  display: inline-block;
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 0.75rem;
  font-weight: 700;
}

.abm-tgt-growth-badge.positive { background: #D1FAE5; color: #059669; }
.abm-tgt-growth-badge.negative { background: #FEE2E2; color: #DC2626; }

.abm-tgt-hidden-mobile { visibility: hidden; height: 0; padding: 0; }

.abm-tgt-ly-row { background: var(--abm-gray-50); }

/* Quarter header colors */
.abm-tgt-header.abm-tgt-q1 { background: rgba(59, 130, 246, 0.15); }
.abm-tgt-header.abm-tgt-q2 { background: rgba(34, 197, 94, 0.15); }
.abm-tgt-header.abm-tgt-q3 { background: rgba(245, 158, 11, 0.15); }
.abm-tgt-header.abm-tgt-q4 { background: rgba(239, 68, 68, 0.15); }

/* Revenue only grid */
.abm-tgt-revenue-grid { overflow-x: auto; }
.abm-tgt-revenue-row {
  display: grid;
  grid-template-columns: 180px repeat(12, minmax(55px, 1fr)) 70px 60px;
  align-items: center;
  border-bottom: 1px solid var(--abm-gray-100);
  min-height: 36px;
}

.abm-tgt-revenue-row.abm-tgt-row-header {
  background: linear-gradient(135deg, #1B365D, #2563EB);
  color: #fff;
}

/* Search highlight */
.abm-tgt-container mark,
.abm-tgt-container .search-highlight {
  background: #FDE68A;
  color: inherit;
  padding: 0 2px;
  border-radius: 2px;
}

/* ==================== RESPONSIVE ==================== */

@media (max-width: 1024px) {
  .abm-tgt-otb-main { grid-template-columns: repeat(2, 1fr); }
}

@media (max-width: 640px) {
  .abm-tgt-otb-main { grid-template-columns: 1fr; }
  .abm-tgt-grid-header { padding: 1rem; }
  .abm-tgt-grid-actions { justify-content: center; }
}
